<html>

<head>
  <title>ZampanioSim!!!</title>
  <style>
    .visible{
      background: #033476;
    }
  </style>
  <script src="tapcode/index.js"></script>
  <script>
    const clickAudio = new Audio("audio/web_SoundFX_254286__jagadamba__mechanical-switch.mp3");
    const musicAudio = new Audio("audio/slide.mp3");
    musicAudio.volume = 0.25;
    const doorAudio = new Audio("audio/close_door_1.mp3");

    const zampanio_key = "lp_route";

   // https://www.boxentriq.com/code-breaking/tap-code
   //why yes it SHOULD be easier to know what this says if you are reading the source code
   //thank you for understanding
   const message = ".. ....  .... ....   .. ...  . .  .... ...   . ...  ... ....  ... .  ... ....  ... ...  .. ....  ..... .....  . .....  . ....   ..... ....  ... ....  .... .....  .... ..   ... ..  .. ....  ... ...  . ....   . .  ... .  .... ..  . .....  . .  . ....  ..... ....  ";
    let tapcode;

    function getParameterByName(name, url) {
    if (!url) {
      url = window.location.href;
    }
    name = name.replace(/[[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

    window.onload = () => {
      console.log(`%cJR NOTE: you can find the passwords for North's rabbithole here: https://github.com/FarragoFiction/LitRPGSim/blob/master/src/CanvasFuckery/PasswordStorage.ts Actually. Since the game does not handle links correctly on itch, maybe going to http://farragofiction.com directly is a better bet.`, "font-weight: bold;font-family: 'Courier New', monospace;color:#06FFC9; background: #346F3F; padding:10px; border-radius: 13px; font-size:13px;");
      tapcode = new TapCode(message, document.querySelector("body"));

      if(getParameterByName("seerOfVoid", null)){
        const images = document.querySelectorAll("img");
        for(let img of images){
          img.classList.add("visible");
        }

      }
      window.onclick = () => {
        if(!tapcode.ele){
          tapcode.createElement();
        }
        clickAudio.play();
        if (musicAudio.pause) {
          musicAudio.play();
        }
      }

      if (localStorage[zampanio_key]) {
        const doors = document.querySelectorAll(".door");
        for(let door of doors){
          door.style.display="block"
        }
      }
    }

    const moveToLocation = (location) => {
      doorAudio.play();
      setTimeout(() => {
        window.location.href = location;
      }, 500)
    }

    const goSouth = () => {
      moveToLocation("http://farragofiction.com/ZampanioSimSouth");
    }

    const goOther = () => {
      moveToLocation("http://farragofiction.com/SettlersFromTheWest");

    }

    const goEast = () => {
      moveToLocation("http://farragofiction.com/ZampanioSimEast");
    }

    const goNorth = () => {
      moveToLocation("http://farragofiction.com/ZampanioSimNorth");
    }

    const goCenter = () => {
      moveToLocation("http://farragofiction.com/TheTruthAboutAlt");
    }

    const goSouthEast = () => {
      if (new Date().getDay() === 2) {//tuesday is also for D
        moveToLocation("http://farragofiction.com/D.Log//");
      } else {
        moveToLocation("http://farragofiction.com/ATranscript");
      }
    }

    const goCenterSouthEast = () => {
      moveToLocation("http://farragofiction.com/SecurityLog/cctv.html");
    }

    const goSouthWest = () => {
      if (new Date().getDay() === 2) {//tuesday should be sbahj day
        moveToLocation("http://farragofiction.com/SBAHJGirlfriend/");
      } else {
        moveToLocation("http://farragofiction.com/NagaGirlfriend/");
      }
    }
  </script>

  <style>
    .door:hover {
      filter: contrast(140%);
      cursor: pointer;
    }
  </style>
</head>

<body style="background: url(images/background.jpg);">
  <div style="position: relative;  display: block; width: 600px; margin-left: auto; margin-right: auto" id="container">
    <img style="display: block; width: 600px;" id="room" src="images/empty.PNG">
    <img onclick="goNorth()" class="door"
      style="display: block; width: 75px; position: absolute; top: 20px; left: 300px; " id="north"
      src="images/northdoor.PNG">
    <img onclick="goSouth()" class="door"
      style="display: none; width: 75px; position: absolute; bottom: 0px; left: 300px;" id="south"
      src="images/southdoor.PNG">
    <img onclick="goEast()" class="door"
      style="display: none; width: 40px;  position: absolute; top: 293px; right: 0px;" id="east"
      src="images/eastdoor.PNG">
    <img onclick="goOther()" class="door"
      style="display:  block; position: absolute; top: 293px; left: 0px;  width: 40px;" id="west"
      src="images/westdoor.PNG">
    <img onclick="goSouthWest()" class="door"
      style="display:  none; position: absolute; bottom: 13px; left: 12px;  width: 40px;" id="west"
      src="images/westdoor.PNG">

      <img onclick="goCenter()" class="door"
      style="display:  none; position: absolute; bottom: 221px; left: 279px;  width: 40px;" id="west"
      src="images/westdoor.PNG">

      <img onclick="goSouthEast()" class="door"
      style="display:  none; position: absolute; bottom: 12px; right: 12px;  width: 40px;" id="west"
      src="images/westdoor.PNG">

      <img onclick="goCenterSouthEast()" class="door"
      style="display:  none; position: absolute; bottom: 85px; right: 85px;  width: 40px;" id="west"
      src="images/westdoor.PNG">

  </div>
</body>

</html>